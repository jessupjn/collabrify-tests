<html>
  <head>
    <title>CHANNEL-API</title>
  </head>
  <body bgcolor="#E6E6FA">
    <script type="text/javascript" src="https://talkgadget.google.com/talkgadget/channel.js"></script>
    <script language="javascript">
      // Allows debugging in the console for testing
      var console;
      if (window.external) {
        console = {};
        console.log = function (message) {
          window.external.notify(message);
        }
      }

      // Available functions for ChannelAPI use.
      var channel;
      var socket;
      function closeConnection() { if (socket) { socket.close() } }
      function onError(a) { console.log(a); window.external.notify("errors::" + a.code + "|" + a.description) }
      function onMessage(a) { window.external.notify("message:" + a.data) }
      function onClose() { window.external.notify("onClose:") }
      function onOpen() { window.external.notify("onOpen::") }
      function connectToServer(a) { channel = new goog.appengine.Channel(a); socket = channel.open(); socket.onopen = onOpen; socket.onmessage = onMessage; socket.onerror = onError; socket.onClose = onClose }
      window.onload = function () { window.external.notify("onLoad::");}
    </script>
  </body>
</html>
